{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/controllers/AuthController.js","webpack:///./src/controllers/GameController.js","webpack:///./src/controllers/UserController.js","webpack:///./src/index.js","webpack:///./src/middleware/authenticate.js","webpack:///./src/middleware/role.js","webpack:///./src/middleware/upload.js","webpack:///./src/models/Game.js","webpack:///./src/models/GameJob.js","webpack:///./src/models/User.js","webpack:///./src/queue/index.js","webpack:///./src/routes/auth.js","webpack:///./src/routes/game.js","webpack:///./src/routes/user.js","webpack:///external \"bcryptjs\"","webpack:///external \"body-parser\"","webpack:///external \"cors\"","webpack:///external \"dotenv\"","webpack:///external \"express\"","webpack:///external \"fs\"","webpack:///external \"jsonwebtoken\"","webpack:///external \"mongo-queue\"","webpack:///external \"mongoose\"","webpack:///external \"mongoose-slug-generator\"","webpack:///external \"morgan\"","webpack:///external \"multer\"","webpack:///external \"multer-firebase-storage\"","webpack:///external \"path\""],"names":["User","require","bcrypt","jwt","register","req","res","next","find","email","body","err","users","length","hash","password","hashedPass","json","error","user","name","role_id","save","then","status","message","catch","login","findOne","$or","compare","result","token","sign","id","process","env","JWT_SECRET_KEY","expiresIn","logout","module","exports","Game","fs","path","queue","confirmed","games","myGames","count","creator_id","total","index","response","show","gameID","findById","store","game","title","owner_id","file","console","log","update","updateData","findByIdAndUpdate","$set","upsert","new","destroy","findByIdAndRemove","getGame","filePath","join","__dirname","query","slug","sendFile","checkStatus","userID","_id","salt","genSaltSync","hashSync","express","mongoose","morgan","bodyParser","cors","dotenv","config","connect","DB","useNewUrlParser","useUnifiedTopology","db","connection","on","once","app","use","urlencoded","extended","static","PORT","listen","AuthRoute","UserRoute","GameRoute","success","authenticate","headers","authorization","split","decode","verify","role","rolesArray","code","authorized","some","multer","FirebaseStorage","upload","storage","bucketName","credentials","unique","fileFilter","callback","mimetype","limits","fileSize","Schema","plugin","gameSchema","type","String","Boolean","data","timestamps","model","CREATED","FETCHING","FETCHED","INTERRUPTED","gameJobSchema","game_id","Types","ObjectId","ref","state","enum","default","state_history","interrupt","userSchema","Number","GameJob","Addition","Template","createGameJob","router","Router","AuthController","post","get","GameController","single","UserController"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const User = require('../models/User')\nconst bcrypt = require('bcryptjs')\nconst jwt = require('jsonwebtoken')\n\nconst register = (req, res, next) => {\n    User.find({email : req.body.email}, function (err, users) {\n        if (!users.length){\n            bcrypt.hash(req.body.password, 10, function (err, hashedPass) {\n                if (err) {\n                    res.json({\n                        error: err\n                    })\n                }\n\n                let user = new User({\n                    name: req.body.name,\n                    email: req.body.email,\n                    password: hashedPass,\n                    role_id: req.body.role_id\n                })\n\n                user.save()\n                    .then(user => {\n                        res.json({\n                            status: 'success',\n                            message: 'Вы успешно зарегистрировалтсь'\n                        })\n                    })\n                    .catch(error => {\n                        res.json({\n                            status: 'error',\n                            message: 'Произошла ошибка!'\n                        })\n                    })\n            })\n        }else{\n            res.json({\n                status: 'error',\n                message: 'Адрес электронной почты уже существует'\n            })\n        }\n    });\n}\n\nconst login = (req, res, next) => {\n    let email = req.body.email,\n        password = req.body.password\n\n    User.findOne({$or: [{email}]})\n        .then(user => {\n            if (user) {\n                bcrypt.compare(password, user.password, function (err, result) {\n                    if (err) {\n                        res.json({\n                            error: err\n                        })\n                    }\n\n                    if (result) {\n                        let token = jwt.sign({\n                                id: user.id,\n                                email: user.email,\n                                name: user.name,\n                                role_id: user.role_id,\n                            }, process.env.JWT_SECRET_KEY, {expiresIn: '72h'})\n\n                        res.json({\n                            status: 'success',\n                            message: \"Вход выполнен успешно\",\n                            token\n                        })\n                    } else {\n                        res.json({\n                            status: 'error',\n                            message: 'Пароль не соответствует'\n                        })\n                    }\n                })\n            } else {\n                res.json({\n                    status: 'error',\n                    message: \"Пользователь не найден!\"\n                })\n            }\n        })\n}\n\nconst user = (req, res, next) => {\n    res.json({\n        user: req.user\n    })\n}\n\nconst logout =  (req, res) => {\n    return res.status(200).json({\n        message: 'Успешный выход из системы'\n    });\n}\n\nmodule.exports = {\n    register,\n    login,\n    logout,\n    user\n}","const Game = require('../models/Game')\nconst fs = require('fs')\nconst path = require('path')\nconst queue = require('../queue')\n\n// const unzipper = require('unzipper')\n\n// Confirmed games\nconst confirmed = (req, res, next) => {\n  Game.find({ status: 1 }, function(err, games) {\n    if (err) {\n      res.json({\n        status: 'error',\n        message: 'Что-то пошло не так!'\n      })\n    } else {\n      res.json({\n        games\n      })\n    }\n  })\n}\n\n// Creator games\nconst myGames = (req, res) => {\n  Game.count({ creator_id: req.user.id }, function(err, total) {\n    if (err) {\n      res.json({\n        status: 'error',\n        message: 'Что-то пошло не так!'\n      })\n    } else {\n      Game.find({ creator_id: req.user.id }, function(err, games) {\n        if (err) {\n          res.json({\n            status: 'error',\n            message: 'Что-то пошло не так!'\n          })\n        } else {\n          res.json({\n            games,\n            total\n          })\n        }\n      })\n    }\n  })\n}\n\n// All games\nconst index = (req, res, next) => {\n  Game.count().then(total => {\n    Game.find()\n      .then(response => {\n        res.json({\n          response,\n          total\n        })\n      })\n      .catch(error => {\n        res.json({\n          status: 'error',\n          message: 'Что-то пошло не так!'\n        })\n      })\n  })\n}\n\n// Single\nconst show = (req, res, next) => {\n  let gameID = req.body.id\n\n  Game.findById(gameID)\n    .then(response => {\n      res.json({\n        response\n      })\n    })\n    .catch(error => {\n      res.json({\n        status: 'error',\n        message: 'Что-то пошло не так!'\n      })\n    })\n}\n\n// Create\nconst store = (req, res, next) => {\n  let game = new Game({\n    title: req.body.title,\n    status: req.body.status === 'true',\n    creator_id: req.body.creator_id,\n    owner_id: req.body.owner_id\n  })\n\n  if (req.file) {\n    game.file = req.file.path\n  } else {\n    res.json({\n      status: 'error',\n      message: 'Пожалуйста загрузите файл!'\n    })\n    return\n  }\n\n  game\n    .save()\n    .then(game => {\n      //       if (game.file) {\n      //         fs.createReadStream(req.file.path).pipe(unzipper.Extract({ path: 'games/' + game.slug }))\n      //\n      //         // fs.readFile('games/'+game.slug+'/index.html', 'utf8', function (err,data) {\n      //         //     if (err) {\n      //         //         return console.log(111, err);\n      //         //     }\n      //         //     let result = data.replace(/src=\"js/g, 'src=\"http://localhost:4000/games/'+game.slug+'/js');\n      //         //\n      //         //     fs.writeFile('games/'+game.slug+'/index.html', result, 'utf8', function (err) {\n      //         //         if (err) return console.log(222 ,err);\n      //         //     });\n      //         //     console.log(9999)\n      //         // });\n      //       }\n      res.json({\n        status: 'success',\n        message: 'Игра успешно добавлена'\n      })\n    })\n    .catch(error => {\n      console.log(error)\n      res.json({\n        status: 'error',\n        message: 'Произошла ошибка!'\n      })\n    })\n}\n\n// Update\nconst update = (req, res, next) => {\n  let gameID = req.body.id,\n    updateData = {\n      title: req.body.title,\n      status: req.body.status === 'true',\n      creator_id: req.body.creator_id,\n      owner_id: req.body.owner_id\n    }\n\n  if (req.file) {\n    updateData.file = req.file.path\n  }\n\n  Game.findByIdAndUpdate(gameID, { $set: updateData }, { upsert: true, new: true }, function(\n    err,\n    game\n  ) {\n    if (err) {\n      res.json({\n        status: 'error',\n        message: 'Произошла ошибка!'\n      })\n    } else {\n      // if (req.file) {\n      //   fs.createReadStream(req.file.path).pipe(unzipper.Extract({ path: 'games/' + game.slug }))\n      // }\n      res.json({\n        status: 'success',\n        message: 'Игра успешно обновлена'\n      })\n    }\n  })\n}\n\n// Delete\nconst destroy = (req, res, next) => {\n  let gameID = req.body.id\n\n  Game.findByIdAndRemove(gameID)\n    .then(response => {\n      res.json({\n        message: 'Игра успешно удалена'\n      })\n    })\n    .catch(error => {\n      res.json({\n        message: 'Что-то пошло не так!'\n      })\n    })\n}\n\n// Get game html\nconst getGame = (req, res) => {\n  const filePath = path.join(__dirname + './../games/' + req.query.slug + '/index.html')\n  res.sendFile(filePath)\n}\n\n// Check status\nconst checkStatus = (req, res) => {\n  Game.find({ slug: req.query.slug }, function(err, game) {\n    if (err) {\n      res.json({\n        status: 'error',\n        message: 'Что-то пошло не так!'\n      })\n    } else {\n      res.json({\n        game\n      })\n    }\n  })\n}\n\nmodule.exports = {\n  confirmed,\n  myGames,\n  index,\n  show,\n  store,\n  update,\n  destroy,\n  getGame,\n  checkStatus\n}\n","const User = require('../models/User')\nconst bcrypt = require('bcryptjs')\n\n// All users\nconst index = (req, res) => {\n    User.count()\n        .then(total => {\n            User.find()\n                .then(response => {\n                    res.json({\n                        response,\n                        total\n                    })\n                })\n                .catch(error => {\n                    res.json({\n                        status: 'error',\n                        message: 'Что-то пошло не так!'\n                    })\n                })\n        })\n}\n\n// Single user\nconst show = (req, res) => {\n    let userID = req.body.id\n\n    User.findById(userID)\n        .then(response => {\n            res.json({\n                response\n            })\n        })\n        .catch(error => {\n            res.json({\n                status: 'error',\n                message: 'Что-то пошло не так!'\n            })\n        })\n}\n\n// Create\nconst store = (req, res) => {\n    User.find({email: req.body.email}, function (err, users) {\n        if (!users.length) {\n            bcrypt.hash(req.body.password, 10, function (err, hashedPass) {\n                if (err) {\n                    res.json({\n                        error: err\n                    })\n                }\n\n                let user = new User({\n                    name: req.body.name,\n                    email: req.body.email,\n                    password: hashedPass,\n                    role_id: req.body.role_id\n                })\n\n                user.save()\n                    .then(user => {\n                        res.json({\n                            status: 'success',\n                            message: 'Вы успешно зарегистрировалтсь'\n                        })\n                    })\n                    .catch(error => {\n                        res.json({\n                            status: 'error',\n                            message: 'Произошла ошибка!'\n                        })\n                    })\n            })\n        } else {\n            res.json({\n                status: 'error',\n                message: 'Адрес электронной почты уже существует'\n            })\n        }\n    });\n}\n\n// Update\nconst update = (req, res) => {\n    let userID = req.body.id,\n        updateData = {\n            name: req.body.name,\n            email: req.body.email,\n            role_id: req.body.role_id\n        },\n        email = req.body.email\n    User.find({_id: userID}).then(user => {\n        if (user[0].email !== email) {\n            User.find({email}, function (err, users) {\n                if (users.length) {\n                    res.json({\n                        status: 'error',\n                        message: 'Адрес электронной почты уже существует'\n                    })\n                }\n            });\n        }\n\n        if (req.body.password) {\n            const salt = bcrypt.genSaltSync(10);\n            updateData.password = bcrypt.hashSync(req.body.password, salt)\n        }\n\n        User.findByIdAndUpdate(userID, {$set: updateData})\n            .then(() => {\n                res.json({\n                    status: 'success',\n                    message: 'Пользователь успешно обновлен'\n                })\n            })\n            .catch(error => {\n                res.json({\n                    status: 'error',\n                    message: 'Произошла ошибка!'\n                })\n            })\n    })\n}\n\n// Delete\nconst destroy = (req, res) => {\n    let userID = req.body.id\n\n    User.findByIdAndRemove(userID)\n        .then(response => {\n            res.json({\n                status: 'success',\n                message: 'Пользователь успешно удален'\n            })\n        })\n        .catch(error => {\n            res.json({\n                status: 'error',\n                message: 'Что-то пошло не так!'\n            })\n        })\n}\n\nmodule.exports = {\n    index,\n    show,\n    store,\n    update,\n    destroy\n}","const express = require('express')\nconst mongoose = require('mongoose')\nconst morgan = require('morgan')\nconst bodyParser = require('body-parser')\nconst cors = require('cors')\nconst path = require('path')\nconst dotenv = require('dotenv')\ndotenv.config()\n\nmongoose.connect(process.env.DB, { useNewUrlParser: true, useUnifiedTopology: true })\nconst db = mongoose.connection\n\ndb.on('error', err => {\n  console.log(err)\n}).once('open', () => {\n  console.log('Database Connected')\n})\n\nconst app = express()\n\napp.use(morgan('dev'))\napp.use(bodyParser.urlencoded({ extended: true }))\napp.use(bodyParser.json())\napp.use(cors())\napp.use('/uploads', express.static('uploads'))\n\nconst PORT = process.env.PORT || 4000\n\napp.listen(PORT, () => {})\n\n// Routes\nconst AuthRoute = require('./routes/auth')\nconst UserRoute = require('./routes/user')\nconst GameRoute = require('./routes/game')\n\napp.use('/api', AuthRoute)\napp.use('/api/users', UserRoute)\napp.use('/api/games', GameRoute)\n\napp.use((req, res, next) => {\n  const filePath = path.join(__dirname + '/404.html')\n  return res.sendFile(filePath)\n})\n\napp.use((err, req, res, next) => {\n  return res.status(err.status || 500).json({\n    success: false,\n    message: err.message\n  })\n})\n","const jwt = require('jsonwebtoken')\nconst User = require('../models/User')\n\nconst authenticate = (req, res, next) => {\n    try {\n        const token = req.headers.authorization.split(' ')[1]\n        const decode = jwt.verify(token, process.env.JWT_SECRET_KEY)\n        req.user = decode\n\n        next()\n    }\n    catch(error) {\n        if(error.name === 'TokenExpiredError'){\n            res.status(200).json({\n                message: 'Срок действия токена истек!'\n            })\n        }else{\n            res.json({\n                message: 'Ошибка аутентификации!'\n            })\n        }\n    }\n}\n\nmodule.exports = authenticate","const role = (rolesArray) => (req, res, next) => {\n    if(!req.user) {\n        return res.status(200).json({\n            success: false,\n            message: 'Сессия истекла',\n            code: 'SESSION_EXPIRED'\n        });\n    }\n    let authorized = false;\n\n    rolesArray.some(role => {\n        if(req.user.role_id === role){\n            authorized = 1\n            return\n        }\n    })\n    if(authorized) {\n        return next();\n    }\n    return res.status(200).json({\n        success: false,\n        message: 'Неавторизованный',\n    })\n}\n\nmodule.exports = role","const path = require('path')\nconst multer = require('multer')\nconst fs = require('fs')\nconst FirebaseStorage = require('multer-firebase-storage')\n\n// let storage = multer.diskStorage({\n//     destination: function (req, file, cb) {\n//         let fs = require('fs'),\n//             uploads_folder = './uploads',\n//             games_folder = './games'\n//\n//         if (!fs.existsSync(uploads_folder)){\n//             fs.mkdirSync(uploads_folder);\n//         }\n//         if (!fs.existsSync(games_folder)){\n//             fs.mkdirSync(games_folder);\n//         }\n//         cb(null, 'uploads/')\n//     },\n//     filename: function (req, file, cb) {\n//         let ext = path.extname(file.originalname)\n//         cb(null, Date.now() + ext)\n//     }\n// })\n\nlet upload = multer({\n  storage: FirebaseStorage({\n    bucketName: 'gs://manitou-alfa-v1.appspot.com',\n    credentials: require('../../firebase-service-key.json'),\n    // directoryPath: 'games',\n    unique: true\n  }),\n  fileFilter: function(req, file, callback) {\n    if (file.mimetype === 'application/x-zip-compressed' || file.mimetype === 'application/zip') {\n      callback(null, true)\n    } else {\n      callback(null, false)\n    }\n  },\n  limits: {\n    fileSize: 1024 * 1024 * 25\n  }\n})\n\nmodule.exports = upload\n","const mongoose = require('mongoose')\nconst slug = require('mongoose-slug-generator')\nconst Schema = mongoose.Schema\nmongoose.plugin(slug)\n\nconst gameSchema = new Schema({\n    title: {\n        type: String\n    },\n    slug: {\n        type: String,\n        slug: \"title\",\n        unique: true\n    },\n    status: {\n        type: Boolean\n    },\n    owner_id: {\n        type: String\n    },\n    creator_id: {\n        type: String\n    },\n    data: {\n        type: String\n    },\n    file: {\n        type: String\n    },\n}, {timestamps: true})\n\nconst Game = mongoose.model('Game', gameSchema)\n\nmodule.exports = Game","import mongoose from 'mongoose'\n\nexport const CREATED = 'CREATED'\nexport const FETCHING = 'FETCHING'\nexport const FETCHED = 'FETCHED'\nexport const INTERRUPTED = 'INTERRUPTED'\n\nconst Schema = mongoose.Schema\n\nconst gameJobSchema = new Schema(\n  {\n    game_id: { type: Schema.Types.ObjectId, ref: 'Game' },\n    state: { type: String, enum: [CREATED, FETCHING, FETCHED, INTERRUPTED], default: CREATED },\n    state_history: [{ type: String }],\n    log: [{ type: String }],\n    error: { type: String, default: null },\n    interrupt: { type: Boolean, default: false }\n  },\n  { timestamps: true }\n)\n\nexport default mongoose.model('GameJob', gameJobSchema)\n","const mongoose = require('mongoose')\nconst Schema = mongoose.Schema\n\nconst userSchema = new Schema({\n    name: {\n        type: String\n    },\n    email: {\n        type: String\n    },\n    password: {\n        type: String\n    },\n    role_id: {\n        type: Number\n    }\n}, {timestamps: true})\n\nconst User = mongoose.model('User', userSchema)\n\nmodule.exports = User","const queue = require('mongo-queue')\nconst GameJob = require('../models/GameJob')\n\nclass Addition extends queue.Template {\n  //\n}\n\nmodule.exports = {\n  createGameJob() {\n    //\n  }\n}\n","const express = require('express')\nconst router = express.Router()\n\nconst AuthController = require('../controllers/AuthController')\nconst authenticate = require('../middleware/authenticate')\n\nrouter.post('/register', AuthController.register)\nrouter.post('/login', AuthController.login)\nrouter.post('/logout', authenticate, AuthController.logout)\nrouter.get('/details', authenticate, AuthController.user)\n\nmodule.exports = router","const express = require('express')\nconst router = express.Router()\n\nconst GameController = require('../controllers/GameController')\nconst role = require('../middleware/role')\nconst authenticate = require('../middleware/authenticate')\nconst upload = require('../middleware/upload')\n\nrouter.get('/confirmed', GameController.confirmed)\nrouter.get('/my-games',  authenticate, role([2]),GameController.myGames)\nrouter.get('/', authenticate, role([1]), GameController.index)\nrouter.post('/show', authenticate, role([1, 2]), GameController.show)\nrouter.post('/store', authenticate, role([1, 2]), upload.single('file'), GameController.store)\nrouter.post('/update', authenticate, role([1, 2]), upload.single('file'), GameController.update)\nrouter.post('/delete', authenticate, role([1, 2]), GameController.destroy)\nrouter.get('/get-game', GameController.getGame)\nrouter.get('/check-status', GameController.checkStatus)\n\nmodule.exports = router","const express = require('express')\nconst router = express.Router()\n\nconst UserController = require('../controllers/UserController')\nconst authenticate = require('../middleware/authenticate')\nconst role = require('../middleware/role')\n\nrouter.get('/', authenticate, role([1]), UserController.index)\nrouter.post('/show', authenticate, role([1]), UserController.show)\nrouter.post('/store', authenticate, role([1]), UserController.store)\nrouter.post('/update', authenticate, role([1]), UserController.update)\nrouter.post('/delete', authenticate, role([1]), UserController.destroy)\n\nmodule.exports = router","module.exports = require(\"bcryptjs\");","module.exports = require(\"body-parser\");","module.exports = require(\"cors\");","module.exports = require(\"dotenv\");","module.exports = require(\"express\");","module.exports = require(\"fs\");","module.exports = require(\"jsonwebtoken\");","module.exports = require(\"mongo-queue\");","module.exports = require(\"mongoose\");","module.exports = require(\"mongoose-slug-generator\");","module.exports = require(\"morgan\");","module.exports = require(\"multer\");","module.exports = require(\"multer-firebase-storage\");","module.exports = require(\"path\");"],"sourceRoot":""}